<!DOCTYPE HTML>

<html>
	<!-- header -->
	<!doctype html>

<html lang="en">

    <head>
		<title>Music Page</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="../assets/css/main.css" />
	</head>   
	<body class="is-preload" onload="start()">
		
<!-- Wrapper -->
<div id="wrapper">

<!-- Menu -->
<!-- Header -->
<header id="header">
    <h1><a href="../index.html">Donovan's Music Page</a></h1>
    <nav class="links">
        <ul>
            <li><a href="../cMusic/hj.html">Chinese</a></li>
            <li><a href="../eMusic/rc.html">English</a></li>
            <li><a href="#">Jazz</a></li>
        </ul>
    </nav>

    <nav class="main">
        <ul>
            <li class="menu">
                <a class="fa-bars" href="#menu">Menu</a>
            </li>
        </ul>
    </nav>
</header>

<!-- Menu -->
<section id="menu">

    <!-- Search -->
    <section>
        <form class="search" method="get">
            <input type="text" name="query" placeholder="Search" onkeyup="searchSong()" id="searchBar" />
        </form>
    </section>

    <!-- Links -->
    <section>
        <ul class="links">
            <li>
                <a href="../cMusic/hj.html">
                    <h3>Chinese Songs</h3>
                    <p>List of songs in Chinese</p>
                </a>
            </li>
            <li>
                <a href="../eMusic/rc.html">
                    <h3>English Songs</h3>
                    <p>List of songs in English</p>
                </a>
            </li>
            <li>
                <a href="#">
                    <h3>Jazz Songs</h3>
                    <p>List of Jazz songs</p>
                </a>
            </li>
        </ul>
        <br>
        <section id="pListMenu"> 

        </section>

    </section>
</section>

    <!-- Main -->
    <div id="main">

        <!-- Post -->
        <article class="post">
            <header>
                <div class="title">
                    <h2>原来的我 - 齐秦</h2>
                    <p>Chord and Lyrics</p>
                </div>
                <div class="meta">
                    <time class="published" datetime=
Warning: Undefined variable $dateFormatted in C:\Users\donov\Downloads\Project\20dzhong-website\inc\single-page.html on line 19
>April 28 2023</time>
                    <a href="#" class="author"><span class="name">Donovan Zhong</span><img src="../images/profile.jpg" alt="" /></a>
                </div>
            </header>
            
            <a href="#" class="image featured"><img src="../images/guitar-back.jpg" alt="" /></a>
            
            <button onclick = "changeFont(-1)" style = ""> -1 Font </button>
            <button onclick = "changeFont(1)" style = ""> +1 Font </button>
            <button onclick = "transposeChord(-1)" style = ""> -1 Chord </button>
            <button onclick = "transposeChord(1)" style = ""> +1 Chord </button>

            <div id="song" hidden="hidden">[Verse 1]
G      D     Bmin Emin   C   Amin7   D     
给我一个空间   没有人走过   感觉到自己被冷落
G      D     C        Bmin     C   D7    G     
给我一段时间   没有人曾经爱过   再一次体会寂寞

[Chorus]
G                Bmin             Cmaj7   Bmin  
曾经爱过却要分手   为何相爱不能相守   到底为什么
  C       Bmin     Amin          D  
早知如此   何必开始   欢笑以后代价就是冷漠

G              Bmin           Cmaj7      Bmin  
既然说过深爱我   为何又要离我远走 海誓山盟抛在脑后
  C       Bmin     Amin          G  
早知如此   何必开始   我还是原来的我

[Verse 2]
G      D     Bmin Emin   C   Amin7   D     
给我一个空间   没有人走过   感觉那心灵的伤口
G      D     C        Bmin     C   D7    G     
给我一段时间   勇敢地面对寂寞   再一次开始生活

[Chorus 2]
G                Bmin             Cmaj7   Bmin  
曾经爱过却要分手   为何相爱不能相守   到底为什么
  C       Bmin     Amin          D  
早知如此   何必开始   欢笑以后代价就是冷漠

G              Bmin           Cmaj7      Bmin  
既然说过深爱我   为何又要离我远走 海誓山盟抛在脑后
  C       Bmin     Amin          G  
早知如此   何必开始   我还是原来的我</div>
            
            <pre>
                <div id="formatted-song" class="songTxt"></div>
            </pre>
            
            <footer>
                <ul class="actions">
                    <button onclick = "hideSidebar()" class="button large"> Expand </button>
                    <button onclick = "showSidebar()" class="button large"> Condense </button>
                </ul>
                <ul class="stats">
                    <li><a href="#">Chinese</a></li>
                </ul>
            </footer>
        </article>

    </div>

    <!-- Sidebar -->
    <div id="sidebar">
        <section id="sidebar">

    <!-- Intro -->
    <section id="intro">
        <header>
            <h2>Song Chords & Tabs</h2>
            <p>Songs that I knows how to play</p>
        </header>
    </section>

    <!-- Posts List -->
    <section id="pListSide">
        <ul class="posts">
            <li class="songLst">
                <article>
                    <header>
                        <h3><a href="./wzdssl.html">我真的受伤了 - 张学友</a></h3>
                        <time class="published" datetime="2023-4-27">April 27, 2023</time>
                    </header>
                    <a href="./wzdssl.html" class="image"><img src="../images/xueyou.jpg" alt="" /></a>
                </article>
            </li>
            <li class="songLst">
                <article>
                    <header>
                        <h3><a href="./xrdg.html">心如刀割 - 张学友</a></h3>
                        <time class="published" datetime="2023-4-27">April 27, 2023</time>
                    </header>
                    <a href="./xrdg.html" class="image"><img src="../images/xueyou.jpg" alt="" /></a>
                </article>
            </li>
            <li class="songLst">
                <article>
                    <header>
                        <h3><a href="./hj.html">花祭 - 齐秦</a></h3>
                        <time class="published" datetime="2023-4-27">April 27, 2023</time>
                    </header>
                    <a href="./hj.html" class="image"><img src="../images/qiqin.jpg" alt="" /></a>
                </article>
            </li>
            <li class="songLst">
                <article>
                    <header>
                        <h3><a href="./yldew.html">原来的我 - 齐秦</a></h3>
                        <time class="published" datetime="2023-4-28">April 28, 2023</time>
                    </header>
                    <a href="./yldew.html" class="image"><img src="../images/qiqin.jpg" alt="" /></a>
                </article>
            </li> 
            <li class="songLst">
                <article>
                    <header>
                        <h3><a href="./yyyy.html">夜夜夜夜 - 齐秦</a></h3>
                        <time class="published" datetime="2023-4-28">April 28, 2023</time>
                    </header>
                    <a href="./yyyy.html" class="image"><img src="../images/qiqin.jpg" alt="" /></a>
                </article>
            </li>
            <li class="songLst">
                <article>
                    <header>
                        <h3><a href="./xy.html">悬崖 - 齐秦</a></h3>
                        <time class="published" datetime="2023-4-28">April 28, 2023</time>
                    </header>
                    <a href="./xy.html" class="image"><img src="../images/qiqin.jpg" alt="" /></a>
                </article>
            </li>
            <li class="songLst">
                <article>
                    <header>
                        <h3><a href="./zycwjbfs.html">这一次我绝不放手 - 齐秦</a></h3>
                        <time class="published" datetime="2023-4-28">April 28, 2023</time>
                    </header>
                    <a href="./zycwjbfs.html" class="image"><img src="../images/qiqin.jpg" alt="" /></a>
                </article>
            </li>
            <li class="songLst">
                <article>
                    <header>
                        <h3><a href="./zycwjbfs.html">不让我的眼泪陪我过夜 - 齐秦</a></h3>
                        <time class="published" datetime="2023-5-26">May 26, 2023</time>
                    </header>
                    <a href="./brwdylpwgy.html" class="image"><img src="../images/qiqin.jpg" alt="" /></a>
                </article>
            </li>
            <li class="songLst">
                <article>
                    <header>
                        <h3><a href="./dyzdj.html">大约在冬季 - 齐秦</a></h3>
                        <time class="published" datetime="2023-5-26">May 26, 2023</time>
                    </header>
                    <a href="./dyzdj.html" class="image"><img src="../images/qiqin.jpg" alt="" /></a>
                </article>
            </li>
            <li class="songLst">
                <article>
                    <header>
                        <h3><a href="./hy.html">寒雨 - 齐秦</a></h3>
                        <time class="published" datetime="2023-5-26">May 26, 2023</time>
                    </header>
                    <a href="./hy.html" class="image"><img src="../images/qiqin.jpg" alt="" /></a>
                </article>
            </li>
            <li class="songLst">
                <article>
                    <header>
                        <h3><a href="./zsdg.html">张三的歌 - 齐秦</a></h3>
                        <time class="published" datetime="2023-5-26">May 26, 2023</time>
                    </header>
                    <a href="./zsdg.html" class="image"><img src="../images/qiqin.jpg" alt="" /></a>
                </article>
            </li>
        </ul>
    </section>

    <!-- About -->
    <section class="blurb">
        <h2>About</h2>
        <p>I used to use a chinese site for finding chords and tabs as well as Tabs. However, the site shutdown in 2021 and I lost all my saved songs. Tabs works fine but it requires a monthly subscription to access more functions. So I just decided to do it myself.</p>
    </section>
</section>    </div>
    
</div>

<!-- Scripts -->
    <!-- Scripts -->
    <script src="../assets/js/jquery.min.js"></script>
    <script src="../assets/js/browser.min.js"></script>
    <script src="../assets/js/breakpoints.min.js"></script>
    <script src="../assets/js/util.js"></script>
    <script src="../assets/js/main.js"></script>
    <script>
        function hideSidebar() {
            var link = document.getElementById('sidebar');
            link.style.display = 'none'; //or
        }

        function showSidebar() {
            var link = document.getElementById('sidebar');
            link.style.display = 'inline'; //or
        }

        function transposeChord(amount) {
            var scale = ["C", "Db", "D", "Eb", "E", "F", "Gb", "G", "Ab", "A", "Bb", "B"];
            var lines = document.getElementById("formatted-song").children;

            for (var i = 0; i < lines.length; i++) {
                var curr = lines[i].innerHTML;
                lines[i].innerHTML = curr.replace(/[CDEFGAB]b?/g,
                function(match) {
                    var i = (scale.indexOf(match) + amount) % scale.length;
                    return scale[ i < 0 ? i + scale.length : i ];});
            }
        }

        function changeFont(increaseFactor) {
            var children = document.getElementById("formatted-song").children;

            for (var i = 0; i < children.length; i++) {
                var child = children[i];
                var fontSize = window.getComputedStyle(child).getPropertyValue("font-size");
                child.style.fontSize = parseInt(fontSize) + increaseFactor + "px";
            }
        }
        
        function highlightChord() {
            var preformattedText = document.getElementById("song").innerHTML;
            var formatted = document.getElementById("formatted-song");

            // Split the text into lines
            var lines = preformattedText.split(/\r?\n/);

            // Loop through each line of the text
            for (let i = 0; i < lines.length; i += 2) {
                // Create a new div element to hold the song
                var songDiv = document.createElement("div");
                songDiv.classList.add("song-line");

                var line1 = lines[i];
                var line2 = lines[i+1];

                // Check if the line contains chords
                if (line1.trim().match(/^[A-G][#b]?(m|maj|min|sus)?(\d)?(\s|$)/i)) {
                    // Create a new div element to hold the chord line and append it to the song div
                    var chordDiv = document.createElement("div");
                    chordDiv.classList.add("chord-line");
                    chordDiv.innerHTML = line1;
                    songDiv.appendChild(chordDiv);
                    
                    // Create a new div element to hold the song lyric and append it to the song div
                    var lyricDiv = document.createElement("div");
                    lyricDiv.classList.add("lyric-line");
                    lyricDiv.innerHTML = line2;
                    songDiv.appendChild(lyricDiv);

                    formatted.appendChild(songDiv);
                } else {
                    i -= 1;
                    var divider = document.createElement("div");
                    if (line1.trim() == "") {
                        divider.innerHTML = "\n";
                    } else {
                        divider.innerHTML = line1;
                    }
                    
                    formatted.appendChild(divider);

                }
            }

            var child = document.getElementById("formatted-song").children;
            for (var i = 0; i < child.length; i++) {
                var curr = child[i].innerHTML;
                child[i].innerHTML = curr.replace(/\b[A-G](#|b)?(maj|min|dim|aug|sus)?(6|7|9|11|13)?\b/g,
                function(match) {
                    return "<span class='tabs'>" + match + "</span>";});
            }
        }

        function populateMenu() {
            var list = document.getElementById("pListSide").innerHTML;
            document.getElementById("pListMenu").innerHTML = list;
        }

        function start() {
            highlightChord();
            populateMenu();
        }

        function searchSong() {
            let input = document.getElementById('searchBar').value
            input=input.toLowerCase();
            let x = document.getElementById('pListMenu').getElementsByClassName('songLst');
            
            for (i = 0; i < x.length; i++) { 
                if (!x[i].innerHTML.toLowerCase().includes(input)) {
                    x[i].style.display="none";
                }
                else {
                    x[i].style.display="list-item";                 
                }
            }
        }


    </script>	</body>
</html>